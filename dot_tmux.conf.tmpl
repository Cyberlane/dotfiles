# --- General Settings ---
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -g prefix C-b
bind C-b send-prefix

# Fix Escape key delay for Vim/Neovim
set -s escape-time 0

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1
set-option -g renumber-windows on

# Enable mouse support
set -g mouse on

# Reload binding (Replacement for autoreload)
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# --- 1Password SSH Agent Support ---
set-option -g update-environment "DISPLAY SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY"
setenv -g SSH_AUTH_SOCK "/Users/{{ .chezmoi.username }}/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"

# --- Plugins ---
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'jaclu/tmux-menus'
set -g @plugin 'catppuccin/tmux#v2.1.3'

# --- Plugin Config ---
set -g @menus_trigger 'Space'
set -g @catppuccin_flavor 'macchiato'

# --- Terminal Features ---
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setut=\E[4:3:%p1%dm'

# --- Initialize TPM ---
run '~/.tmux/plugins/tpm/tpm'
